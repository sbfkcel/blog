var temp={};temp.url=window.location.href,window.onload=function(){ui.footerBottom(),ui.ifhome(),ui.headerMenu()},window.onresize=function(){ui.footerBottom(),ui.menuAnimate(temp.currentmenu)},window.onscroll=function(){temp.scrollTop=document.documentElement.scrollTop||document.body.scrollTop;var e=f.id("gotop");temp.scrollTop>60?f.animate(e,{bottom:30,opacity:100}):f.animate(e,{bottom:-100,opacity:0})};var f={id:function(e){return document.getElementById(e)},tagName:function(e,t){return e.getElementsByTagName(t)},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:getComputedStyle(e,!1)[t]},animate:function(e,t,n){clearInterval(e.timer),e.timer=setInterval(function(){var o=!0;for(var r in t){var a=0;a="opacity"==r?Math.round(100*parseFloat(f.getStyle(e,r))):parseInt(f.getStyle(e,r));var i=(t[r]-a)/6;i=i>0?Math.ceil(i):Math.floor(i),a!=t[r]&&(o=!1),"opacity"==r?(e.style.filter="alpha(opacity:"+(a+i)+")",e.style.opacity=(a+i)/100):e.style[r]=a+i+"px"}o&&(clearInterval(e.timer),n&&n())},30)},getByClass:function(e,t){for(var n=e.getElementsByTagName("*"),o=[],r=0;n>r;r++)n[r].className==t&&o.push(n[r]);return o},getElementPos:function(e){var t=navigator.userAgent.toLowerCase(),n=-1!=t.indexOf("opera"),o=(-1!=t.indexOf("msie")&&!n,e);if(null===o.parentNode||"none"==o.style.display)return!1;var r,a=null,i=[];if(o.getBoundingClientRect){r=o.getBoundingClientRect();var l=Math.max(document.documentElement.scrollTop,document.body.scrollTop),u=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{x:r.left+u,y:r.top+l}}if(document.getBoxObjectFor){r=document.getBoxObjectFor(o);var m=o.style.borderLeftWidth?parseInt(o.style.borderLeftWidth):0,s=o.style.borderTopWidth?parseInt(o.style.borderTopWidth):0;i=[r.x-m,r.y-s]}else{if(i=[o.offsetLeft,o.offsetTop],a=o.offsetParent,a!=o)for(;a;)i[0]+=a.offsetLeft,i[1]+=a.offsetTop,a=a.offsetParent;(-1!=t.indexOf("opera")||-1!=t.indexOf("safari")&&"absolute"==o.style.position)&&(i[0]-=document.body.offsetLeft,i[1]-=document.body.offsetTop)}for(a=o.parentNode?o.parentNode:null;a&&"BODY"!=a.tagName&&"HTML"!=a.tagName;)i[0]-=a.scrollLeft,i[1]-=a.scrollTop,a=a.parentNode?a.parentNode:null;return{x:i[0],y:i[1]}},ajax:function(e,t,n){var o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Misrosoft.XMLHTTP");o.open("get",e,!0),o.send(),o.onreadystatechange=function(){4==o.readyState&&(200==o.status?t(o.responseText):n&&n(o.status))}}},ui={scrollTop:function(e){var t=null,e=arguments[0];clearInterval(t),t=setInterval(function(){var n=(e-temp.scrollTop)/5;n=n>0?Math.ceil(n):Math.floor(n),scroll(0,temp.scrollTop+n),temp.scrollTop+n==e&&clearInterval(t)},30)},ishome:function(){return-1==temp.url.indexOf("##")?!0:!1},ifhome:function(){var e=f.id("header"),t=f.id("footer");if(ui.ishome())e.className="homeheader",t.className="footer",temp.currentmenu=0,ui.menuAnimate(temp.currentmenu);else{t.className="footer footerNone",e.className="homeheader header";for(var n=temp.url.split("##"),o=ui.menulist(),r=[],a=0;a<o.length;a++)r.push(o[a].href);for(var a=0;a<r.length;a++)r[a]==temp.url&&(temp.currentmenu=a);ui.menuAnimate(temp.currentmenu),ui.loadContent(n)}},menulist:function(){var e=f.id("header"),t=e.getElementsByTagName("ul")[0],n=t.getElementsByTagName("a");return n},headerMenu:function(){for(var e=ui.menulist(),t=0;t<e.length;t++)e[t].index=t,e[t].onclick=function(){return this.href!=temp.url&&(temp.url=this.href,ui.ifhome()),0==this.index?(document.getElementsByTagName("body")[0].removeChild(f.id("main")),!1):(temp.currentmenu=this.index,void ui.menuAnimate(temp.currentmenu))}},menuAnimate:function(e){var t=ui.menulist(),n=f.getElementPos(t[e]).x,o=t[e].offsetWidth,r=f.id("currentmenu");f.animate(r,{width:o,left:n})},loadContent:function(url){url.shift();for(var ajson=[],j=0;j<url.length;j++){var val=url[j].split("=");ajson.push('"'+val[0]+'":"'+val[1]+'"')}var sjson="{"+ajson.join()+"}",jsonval=eval("("+sjson+")");f.ajax("/"+jsonval.href+".html?"+(new Date).getTime(),function(e){var t=f.id("main");if(t)t.innerHTML=e;else{var n=document.createElement("div");n.id="main",n.innerHTML=e,n.className="main";var o=f.id("footer"),r=document.getElementsByTagName("body")[0];r.insertBefore(n,o)}},function(){alert("请求错误，读取失败")})},footerBottom:function(){var e=f.id("footer"),t=document.body.clientHeight,n=document.documentElement.clientHeight;n>t?(e.style.position="absolute",e.style.bottom="0px"):e.style.cssText=""}};