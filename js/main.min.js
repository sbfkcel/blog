var temp={};temp["url"]=window.location.href;window.onload=function(){ui.footerBottom();ui.ifhome();ui.headerMenu()};window.onresize=function(){ui.footerBottom();ui.menuAnimate(temp["currentmenu"])};window.onscroll=function(){temp["scrollTop"]=document.documentElement.scrollTop||document.body.scrollTop;var e=f.id("gotop");if(temp["scrollTop"]>60){f.animate(e,{bottom:30,opacity:100})}else{f.animate(e,{bottom:-100,opacity:0})}};var f={id:function(e){return document.getElementById(e)},tagName:function(e,t){return e.getElementsByTagName(t)},getStyle:function(e,t){if(e.currentStyle){return e.currentStyle[t]}else{return getComputedStyle(e,false)[t]}},animate:function(e,t,n){clearInterval(e.timer);e.timer=setInterval(function(){var o=true;for(var r in t){var a=0;if(r=="opacity"){a=Math.round(parseFloat(f.getStyle(e,r))*100)}else{a=parseInt(f.getStyle(e,r))}var i=(t[r]-a)/6;i=i>=0?Math.ceil(i):Math.floor(i);if(a!=parseInt(t[r]))o=false;if(r=="opacity"){e.style.filter="alpha(opacity:"+(a+i)+")";e.style.opacity=(a+i)/100}else{e.style[r]=a+i+"px"}}if(o){clearInterval(e.timer);if(n)n()}},30)},getByClass:function(e,t){var n=e.getElementsByTagName("*");var o=[];for(var r=0;r<n;r++){if(n[r].className==t){o.push(n[r])}}return o},getElementPos:function(e){var t=navigator.userAgent.toLowerCase();var n=t.indexOf("opera")!=-1;var o=t.indexOf("msie")!=-1&&!n;var r=e;if(r.parentNode===null||r.style.display=="none"){return false}var a=null;var i=[];var l;if(r.getBoundingClientRect){l=r.getBoundingClientRect();var f=Math.max(document.documentElement.scrollTop,document.body.scrollTop);var s=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{x:l.left+s,y:l.top+f}}else if(document.getBoxObjectFor){l=document.getBoxObjectFor(r);var u=r.style.borderLeftWidth?parseInt(r.style.borderLeftWidth):0;var m=r.style.borderTopWidth?parseInt(r.style.borderTopWidth):0;i=[l.x-u,l.y-m]}else{i=[r.offsetLeft,r.offsetTop];a=r.offsetParent;if(a!=r){while(a){i[0]+=a.offsetLeft;i[1]+=a.offsetTop;a=a.offsetParent}}if(t.indexOf("opera")!=-1||t.indexOf("safari")!=-1&&r.style.position=="absolute"){i[0]-=document.body.offsetLeft;i[1]-=document.body.offsetTop}}if(r.parentNode){a=r.parentNode}else{a=null}while(a&&a.tagName!="BODY"&&a.tagName!="HTML"){i[0]-=a.scrollLeft;i[1]-=a.scrollTop;if(a.parentNode){a=a.parentNode}else{a=null}}return{x:i[0],y:i[1]}},ajax:function(e,t,n){var o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Misrosoft.XMLHTTP");o.open("get",e,true);o.send();o.onreadystatechange=function(){if(o.readyState==4){if(o.status==200){t(o.responseText)}else{if(n){n(o.status)}}}}}};var ui={scrollTop:function(e){var t=null;var e=arguments[0];clearInterval(t);t=setInterval(function(){var n=(e-temp["scrollTop"])/5;n=n>0?Math.ceil(n):Math.floor(n);scroll(0,temp["scrollTop"]+n);if(temp["scrollTop"]+n==e){clearInterval(t)}},30)},ishome:function(){if(temp["url"].indexOf("##")==-1){return true}else{return false}},ifhome:function(){var e=f.id("header");var t=f.id("footer");if(ui.ishome()){e.className="homeheader";t.className="footer";temp["currentmenu"]=0;ui.menuAnimate(temp["currentmenu"])}else{t.className="footer footerNone";e.className="homeheader header";var n=temp["url"].split("##");var o=ui.menulist();var r=[];for(var a=0;a<o.length;a++){r.push(o[a].href)}for(var a=0;a<r.length;a++){if(r[a]==temp["url"]){temp["currentmenu"]=a}}ui.menuAnimate(temp["currentmenu"]);ui.loadContent(n)}},menulist:function(){var e=f.id("header");var t=e.getElementsByTagName("ul")[0];var n=t.getElementsByTagName("a");return n},headerMenu:function(){var e=ui.menulist();var t=[];for(var n=0;n<e.length;n++){e[n].index=n;e[n].onclick=function(){if(this.href!=temp["url"]){temp["url"]=this.href;ui.ifhome()}if(this.index==0){document.getElementsByTagName("body")[0].removeChild(f.id("main"));return false}temp["currentmenu"]=this.index;ui.menuAnimate(temp["currentmenu"])}}},menuAnimate:function(e){var t=ui.menulist();var n=f.getElementPos(t[e]).x;var o=t[e].offsetWidth;var r=f.id("currentmenu");f.animate(r,{width:o,left:n})},loadContent:function(url){url.shift();var ajson=[];for(var j=0;j<url.length;j++){var val=url[j].split("=");ajson.push('"'+val[0]+'":"'+val[1]+'"')}var sjson="{"+ajson.join()+"}";var jsonval=eval("("+sjson+")");f.ajax("/"+jsonval.href+".php?"+(new Date).getTime(),function(e){var t=f.id("main");if(t){t.innerHTML=e}else{var n=document.createElement("div");n.id="main";n.innerHTML=e;n.className="main";var o=f.id("footer");var r=document.getElementsByTagName("body")[0];r.insertBefore(n,o)}},function(e){alert("请求错误，读取失败")})},footerBottom:function(){var e=f.id("footer");var t=document.body.clientHeight;var n=document.documentElement.clientHeight;if(t<n){e.style.position="absolute";e.style.bottom="0px"}else{e.style.cssText=""}}};